
<div class="container full-screen">
  <div class="row row-users">
    <div class="col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">
      <%= form_for @user, :url => {:controller => "profile", :action => "update"}, html: { method: :post, class:"form-type-costum form-type-costum-no-padding well-users" } do |f| %>
      <h1>Editer mon profil</h1>
      <% if @user.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>
          <ul>
            <% @user.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
            </ul>
          </div>
        <% end %>

        <div class="form-frame">
          <%= f.text_field :firstname, class: "form-control", placeholder: "Prénom" %>
          <%= f.text_field :lastname, class: "form-control", placeholder: "Nom" %>
          <%= f.text_field :address, class: "form-control", placeholder: "Adresse" %>
          <%= f.text_field :zipcode, class: "form-control", placeholder: "Code postal", pattern: "^(([0-8][0-9])|(9[0-5]))[0-9]{3}$" %>
          <%= f.text_field :city, class: "form-control", placeholder: "Ville" %>
          <%= f.text_field :tel, class: "form-control", placeholder: "Téléphone", pattern: '^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$' %>
          <div class="img-container">
            <% @user.image_users.each do |img_u| %>
            <div class="img-form">
              <%= f.fields_for :image_users, img_u do |ff| %>
                <%= image_tag img_u.file.url(:thumb) %>
                Delete: <%= ff.check_box :_destroy %>
              <% end %>
            </div>
            <% end %>
            <div class="add-img-form">
              <h3>Images</h3>
              <% img_u = ImageUser.new %>
              <%= f.fields_for :image_users, img_u do |ff| %>
                <%= ff.file_field :file %>
                <%= ff.text_field :alt %>
              <% end %>
            </div>
          </div>
          <div id="art_tag_manage">
            <h3>Tags</h3>
            <div class="art_tag_form">
              <form action="#">
                <input type="text" id="add_tag_text" class="form-control">
                <input type="button" id="add_tag_submit" value="add">
              </form>
            </div>
            <div class="art_tags_container" data-prototype="<div class='art_tag' data-name='__name__'><span class='art_tag_name'>__name__</span><span class='art_tag_delete'><i class='fa fa-trash-o' aria-hidden='true'></i></span></div>">
              <%  @user.art_tags.each do |t| %>
              <div class="art_tag" data-name="<%= t.name -%>">
                <span class="art_tag_name"><%= t.name -%></span>
                <span class="art_tag_delete"><i class="fa fa-trash-o" aria-hidden="true"></i></span>
              </div>
              <% end %>
            </div>

            <%= f.hidden_field :all_tags, id: "tag-field", placeholder: "Vos tags" %>
          </div>
        </div>
        <div class="center-button">
          <div class="form-action-container">
            <%= link_to "Back", :back, class:"form-action" %>
            <%= f.submit "Valider", class: "form-action main-action" %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
