<div class="container full-screen">
  <div class="row row-users">
    <div class="col-md-6 col-md-offset-3 col-sm-8 col-sm-offset-2">
      <%= form_for(place, html: { class:"form-type-costum well-users" }) do |f| %>
        <% if @formTitle %>
        <h1><%= @formTitle %></h1>
        <% end %>
        <% if place.errors.any? %>
          <div id="error_explanation">
            <h2><%= pluralize(place.errors.count, "error") %> prohibited this place from being saved:</h2>
            <ul>
              <% place.errors.full_messages.each do |message| %>
                <li><%= message %></li>
              <% end %>
              </ul>
            </div>
          <% end %>
          <div class="form-frame">
            <%= f.hidden_field :user_id %>

            <div class="form-group">
              <%= f.label :name, 'Nom' %>
              <%= f.text_field :name, autofocus: true, class: "form-control", placeholder: "Nom", autocomplete: "off" %>
            </div>
            <div class="form-group">
              <%= f.label :description, 'Description' %>
              <%= f.text_area :description, class: "form-control", placeholder: "Description" %>
            </div>


            <div class="form-group">
              <%= f.label :address, 'Adresse' %>
              <%= f.text_field :address, class: "form-control", placeholder: "Adresse" %>
            </div>
            <div class="form-group">
              <%= f.label :zipcode, 'Code postal' %>
              <%= f.number_field :zipcode, class: "form-control", placeholder: "Code postal" %>
            </div>
            <div class="form-group">
              <%= f.label :city, 'Ville' %>
              <%= f.text_field :city, class: "form-control", placeholder: "Ville" %>
            </div>
            <div class="form-group">
              <%= f.label :area_max, 'Aire maximale' %>
              <%= f.text_field :area_max, class: "form-control", placeholder: "Aire maximale", autocomplete: "off" %>
            </div>
            <div id="img-form-manage" class="img-container" data-id="<%= @place.image_places.length %>">
              <div class="img-list">
                <% @place.image_places.each do |img_u| %>
                <div class="img-form" data-id="<%= img_u.id %>">
                    <%= f.fields_for :image_places, img_u do |ff| %>
                    <%= image_tag img_u.file.url(:thumb) %>
                    <div class="action">
                      <%= ff.check_box :_destroy -%>
                      <%= ff.label :_destroy, class:"label-for-check" %>
                    </div>
                    <% end %>
                </div>
                <% end %>
              </div>
              <% if @place.image_places.length > 0 %>
              <hr>
              <% end %>

              <div class="img-forms" data-prototype="<div class='add-img-form'>
                <input name='user[image_places_attributes][__id__][file]' id='user_image_places_attributes___id___file' type='file'>
                <label class='label-file' for='user_image_places_attributes___id___file'>File</label>
                <input placeholder='Description image' name='user[image_places_attributes][__id__][alt]' id='user_image_places_attributes___id___alt' type='text'>
                <label class='delete' for='user_image_places_attributes___id___file'>File</label>
                </div>">
                <div class="add-img-form" >
                  <% img_u = ImagePlace.new %>
                  <%= f.fields_for :image_places, img_u do |ff| %>
                    <%= ff.file_field :file -%>
                    <%= ff.label :file, class:"label-file" %>
                    <%= ff.text_field :alt, placeholder: "Description de l'image" %>
                    <label class="delete"></label>
                  <% end %>
                </div>
              </div>
              <input type="button" id="add-img-button" value="Ajouter une image" class="form-action main-action">
            </div>


          </div>
          <div class="form-action-container">
            <%= link_to "Back", :back, class:"form-action" %>
            <%= f.submit "Valider", class: "form-action main-action" %>
          </div>
        <% end %>
    </div>
  </div>
</div>
